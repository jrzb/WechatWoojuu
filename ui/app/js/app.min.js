/*! angular-flask-requirejs-seed 2013-05-23 */
!function(){"use strict";var a;a=angular.module("wioApp",["ngResource"],function(){}),a.config(["$routeProvider","$locationProvider",function(a,b){return a.when("/",{templateUrl:"/static/partials/main.html",controller:"MainCtrl"}),a.when("/applied",{templateUrl:"/static/partials/applied.html",controller:"AppliedCtrl"}),a.when("/confirm_email/:emailHash",{templateUrl:"/static/partials/confirm_email.html",controller:"ConfirmCtrl"}),a.otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),a.config(["$httpProvider",function(a){var b,c;return b=null,c=["$q","$injector",function(a,c){var d,e;return e=function(a){return b=b||c.get("$http"),b.pendingRequests.length<1&&$("#loadingWidget").hide(),a},d=function(d){return b=b||c.get("$http"),b.pendingRequests.length<1&&$("#loadingWidget").hide(),a.reject(d)},function(a){return $("#loadingWidget").show(),a.then(e,d)}}],a.responseInterceptors.push(c)}]),a.controller("MainCtrl",["$scope",function(a){return a.applyStatus="pre-register",a.applyBetaAccount=function(){return a.applyStatus="email"}}]),a.controller("RegisterCtrl",["$scope","$location","$http","AppliedUser",function(a,b,c,d){return a.validEmail=!0,a.register=function(){var e,f;return a.validEmail=a.regForm.email.$dirty&&a.regForm.email.$valid&&!a.regForm.email.$error.email,a.validEmail?($("#registerBtn").attr("disabled","disabled"),e={email:a.email},f=JSON.stringify(e),c.post("/register",f).success(function(a){return d.set(a),b.path("/applied")})):void 0}}]),a.controller("AppliedCtrl",["$scope","AppliedUser",function(a,b){return a.email=b.get()}]),a.controller("ConfirmCtrl",["$scope","$http",function(a,b){return b.get("/static/json/wechat_picks.json").success(function(b){return a.operation=b[0],a.product=b[1]})}]),a.directive("uiIf",function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,c){return function(a,b,d){return a.$watch(d.uiIf,function(d){var e,f;return e=null,f=null,e&&(e.remove(),e=void 0),f&&(f.$destroy(),f=void 0),d?(f=a.$new(),c(f,function(a){return e=a,b.after(a)})):void 0})}}}}),a.service("AppliedUser",function(){var a;return a={},{set:function(b){return a=b},get:function(){return a}}})}.call(this);